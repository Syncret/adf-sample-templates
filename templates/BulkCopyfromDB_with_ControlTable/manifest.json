{
    "name": "BulkCopyfromDB_with_ControlTable",
    "description": "Fully copy data in bulk from database using external control table to store partition list of source tables.\n\nWhen you want to migrate data from your data warehouse like Oracle server, Netezza server, Teradata server or SQL Server to Azure, you have to load huge amount of data from multiple tables in data sources. In most cases, data has to be further partitioned in each table so that you can load rows with multiple threads in parallel from single table.  The present template is designed for that case. \n\nIf you want to copy data from a small number of tables with small size of data, it's more efficient for you to go to “copy data tool” to have one single copy activity, or foreach activity + copy activity in your pipeline. This template is more than you need for this simple use case.",
    "image": "data:image/png;base64,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",
    "requires": {
        "linkedservices": {
            "ExternalControlTableConnection": {
                "supportTypes": [
                    "SqlServer",
                    "AzureSqlDatabase",
                    "Odbc",
                    "Oracle",
                    "Db2",
                    "MySql",
                    "Teradata",
                    "Netezza"
                ]
            },
            "DataSourceConnection": {
                "supportTypes": [
                    "SqlServer",
                    "AzureSqlDatabase",
                    "Odbc",
                    "Oracle",
                    "Db2",
                    "MySql",
                    "Teradata",
                    "Netezza"
                ]
            },
            "DataDestinationConnection": {
                "supportTypes": [
                    "AzureBlobStorage",
                    "AzureDataLakeStore",
                    "AzureBlobFS",
                    "FileServer",
                    "AzureSqlDW"
                ],
                "parameterSets": [
                    {
                        "types": [
                            "AzureBlobStorage",
                            "AzureDataLakeStore",
                            "AzureBlobFS",
                            "FileServer"
                        ],
                        "parameters": {
                            "enableStaging_parameter": false,
                            "copyactivity_output_parameter": {
                                "FolderPath": {
                                    "value": "@pipeline().parameters.Data_Destination_Folder_Path",
                                    "type": "Expression"
                                },
                                "FileName": {
                                    "value": "@concat('Patition_',item().PatitionID,'_',item().SourceTableName)",
                                    "type": "Expression"
                                }
                            },
                            "DataDestination_parameter_paramter": {
                                "FolderPath": {
                                    "type": "String"
                                },
                                "FileName": {
                                    "type": "String"
                                }
                            },
                            "DataDestination_typeproperties_paramter": {
                                "format": {
                                    "type": "TextFormat",
                                    "treatEmptyAsNull": true
                                },
                                "fileName": {
                                    "value": "@dataset().FileName",
                                    "type": "Expression"
                                },
                                "folderPath": {
                                    "value": "@dataset().FolderPath",
                                    "type": "Expression"
                                }
                            },
                            "pipeline_parameter": {
                                "Control_Table_Name": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_PatitionID": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_SourceTableName": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_FilterQuery": {
                                    "type": "String"
                                },
                                "Data_Destination_Folder_Path": {
                                    "type": "String"
                                }
                            }
                        }
                    },
                    {
                        "types": [
                            "AzureSqlDW"
                        ],
                        "parameters": {
                            "allowPolyBase_parameter": true,
                            "preCopyScript_parameter": "TRUNCATE TABLE @{item().SourceTableName}",
                            "writeBatchSize_parameter": 10000,
                            "polyBaseSettings_parameter": {
                                "rejectValue": 0,
                                "rejectType": "value",
                                "useTypeDefault": true
                            },
                            "enableStaging_parameter": true,
                            "stagingSettings_parameter": {
                                "path": "adf_solution_template/BulkCopyfromDB_with_ControlTable"
                            },
                            "copyactivity_output_parameter": {
                                "tableName": {
                                    "value": "@item().SourceTableName",
                                    "type": "Expression"
                                }
                            },
                            "DataDestination_parameter_paramter": {
                                "tableName": {
                                    "type": "String"
                                }
                            },
                            "DataDestination_typeproperties_paramter": {
                                "tableName": {
                                    "value": "@dataset().tableName",
                                    "type": "Expression"
                                }
                            },
                            "pipeline_parameter": {
                                "Control_Table_Name": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_PatitionID": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_SourceTableName": {
                                    "type": "String"
                                },
                                "Control_Table_Schema_FilterQuery": {
                                    "type": "String"
                                }
                            }
                        }
                    }
                ]
            }
        }
    },
    "documentation": "https://docs.microsoft.com/en-us/azure/data-factory/"
}